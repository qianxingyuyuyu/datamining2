# datamining2
运行test.py，包含数据预处理、任务1：商品关联规则 、任务2：支付方式分析 、任务3：时间序列分析、任务4：退款分析 一共五个模块。

数据预处理流程
预处理阶段通过商品目录构建商品信息字典和类别映射，使用Dask并行处理原始数据。核心函数process_partition解析每笔订单，生成唯一订单ID，提取商品主类别，标记高价值商品，并计算订单指标。最终输出包含用户信息、商品类别列表、支付详情和统计指标的结构化数据。

任务1：商品关联规则分析
该任务识别常被一起购买的商品类别组合，先过滤多商品订单，用FP-Growth算法挖掘频繁项集（最小支持度0.02），生成关联规则（最小置信度0.5），特别关注电子产品相关规则。结果通过散点图展示规则的支持度、置信度和提升度，并标注TOP10高提升度规则。

任务2：支付方式分析
分析高价值订单（单价>5000）的支付偏好，统计支付方式分布并可视化。进一步挖掘支付方式与商品类别的关联规则，将支付方式编码为事务项，通过TransactionEncoder处理混合数据，生成支付-类别规则（最小支持度0.01，置信度0.6）。

任务3：时间序列分析
提取年、季、月、周等多时间维度特征，分析TOP5商品类别的时段分布。通过用户分组和购买序列分析，生成类别转移对并计算间隔天数，最终输出序列规则的支持度、置信度和提升度。可视化采用多子图展示季度趋势、月度堆叠柱状图和星期分布。

任务4：退款分析
筛选退款订单，用FP-Growth挖掘频繁商品组合（最小支持度0.005），生成关联规则（最小置信度0.4）。优化上限制规则长度为3，采用稀疏矩阵处理，输出易退款商品组合的关联规则。

结果输出与可视化
每个任务输出CSV结果和可视化图表，包括关联规则散点图、支付方式饼图、时间序列趋势图和退款规则表格，平衡了分析深度与结果可读性。
